---
import TestimonialItem from "./TestimonialItem.astro";

const {
  title,
  subTitle,
  testimonials,
  statistics
} = Astro.props;

interface Props {
  title: string;
  subTitle?: string;
  testimonials?: Testimonial[];
  statistics?: StatProps[];
}

// TypeScript type for testimonials
type Testimonial = {
  content: string;
  author: string;
  role: string;
  avatarSrc: string;
};

// TypeScript type for stats.
type StatProps = {
  count: string;
  description: string;
};
---

<section
  class="mx-auto max-w-[85rem] px-4 py-30 sm:px-6 lg:px-8 2xl:max-w-full"
>
  <!-- Title and Subtitle - Full Width -->
  <div class="mb-12 text-center">
    <h2
      class="mb-4 text-3xl text-neutral-800 dark:text-neutral-200 lg:text-4xl"
    >
      {title}
    </h2>
    {subTitle &&
    <p class="mx-auto max-w-3xl text-neutral-600 dark:text-neutral-400">
      {subTitle}
    </p>
  }
  </div>

  <!-- Container for the testimonials and cards in 12-column grid -->
  <div
    class="grid grid-cols-1 lg:grid-cols-12 lg:gap-16"
  >
    <!-- Testimonials Column (4 columns) -->
    <div class="lg:col-span-4">
      <!-- Generate a blockquote for each testimonial in the testimonials array by mapping over the array. -->
      { testimonials &&
        testimonials.map((testimonial) => (
        <TestimonialItem content={testimonial.content} author={testimonial.author} role={testimonial.role} avatarSrc={testimonial.avatarSrc} />
        ))
      }
    </div>

    <!-- Statistics Cards - 4 Column Grid (8 columns) -->
{ statistics &&
    <div class="mt-10 lg:col-span-8 lg:mt-0">
      <div class="space-y-6 sm:space-y-8">
        <ul
          class="grid grid-cols-2 md:grid-cols-4 gap-4"
        >
          <!-- Generate a list item for each stat in the statistics array by mapping over the array. -->
          {
            statistics.map((stat, index) => (
            <li class="flex flex-col p-6 bg-white dark:bg-neutral-800 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 hover:bg-gradient-to-br hover:from-white hover:to-magenta-500/5 dark:hover:from-neutral-800 dark:hover:to-magenta-500/10">
              <div class="mb-2 flex items-end gap-x-2 text-2xl font-bold text-neutral-800 dark:text-neutral-200 sm:text-3xl">
                {index === 1 || index === 2 ? <span class="text-magenta-500"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></span> : null}
                {stat.count}
              </div>
              <p class="text-sm text-neutral-600 dark:text-neutral-400">
                {stat.description}
              </p>
            </li>
            ))
          }
        </ul>
      </div>
    </div>
  }
  </div>
</section>
